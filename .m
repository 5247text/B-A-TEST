%%
%计算迭代初始值
t1 = 1.96 ; %t(0.025,n-1);
t2 = 1.28; %t(0.1,n-1);
sd = 0.61;    %         0.001129; 3.71
de = 0.004;    
d = 0.15 ;                %0.001169;0.94  
n = ceil((2+1.96*1.96)*(t1+t2)^2*sd^2/(2*(d+1.96*sd-de)^2));

%%
%计算p
sd = 3.71;    %         0.001129; 3.71 0.61
de1 = 8.21*3/1.96;    %(6.36+8.21)/2
de2 = 6.36*3/1.96;
d = 0.94;  %0.001169;0.94   0.15
n = 33;
t3 = nctinv(0.025,n-1,0);      %t(0.025,n-1);
X1 = (d+1.96*sd-de1)/(sd*(1/n+1.96*1.96/(2*(n-1)))^(1/2))-t3;
X2 = (-d+1.96*sd-de2)/(sd*(1/n+1.96*1.96/(2*(n-1)))^(1/2))-t3;
p1 = nctcdf(X1, n-1, 0);
p2 = nctcdf(X2, n-1, 0);
p = p1 + p2; %t分布概率计算
